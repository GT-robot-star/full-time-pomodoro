<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Fulltime Pomodoro</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 50px; }
    #timer { font-size: 48px; margin: 20px; }
    button { margin: 5px; padding: 10px 20px; font-size: 16px; }
    #status { font-size: 20px; margin-top: 10px; }
    #total { font-size: 16px; margin-top: 10px; color: #555; }
    #praise-box { display:none; font-size:14px; color:#333; margin-top:10px; }
  </style>
</head>
<body>
  <h1>Fulltime Pomodoro</h1>
  <div id="timer">25:00</div>
  <div id="status">作業中</div>
  <button id="startBtn">▶️ スタート</button>
  <button id="pauseBtn">⏸️ 一時停止</button>
  <button id="resetBtn">⏹️ リセット</button>

  <div id="total">累計作業時間: 0分</div>
  <div id="praise-box"></div>

  <script>
    // ====== 設定（オプションで変更可能） ======
    let workDuration = 25 * 60;     // 作業 25分
    let shortBreak = 5 * 60;        // 休憩 5分
    let longBreak = 15 * 60;        // 長休憩 15分
    let cycleCount = 4;             // サイクルごとに長休憩
    let goalMinutes = 8 * 60;       // 目標合計作業時間（分）

    // ====== 状態管理 ======
    let isWork = true;
    let sessionCount = 0;
    let totalMinutes = 0;
    let remainingTime = workDuration;
    let startTime;
    let isPaused = false;
    let timerInterval;

    // ====== 表示更新 ======
    function displayTime(seconds) {
      const minutes = Math.floor(seconds / 60);
      const secs = seconds % 60;
      document.getElementById("timer").textContent =
        `${minutes}:${secs.toString().padStart(2, '0')}`;
    }

    function updateStatus() {
      document.getElementById("status").textContent = isWork ? "作業中" : "休憩中";
    }

    function updateTotal() {
      document.getElementById("total").textContent = `累計作業時間: ${totalMinutes}分`;
    }

    // ====== タイマー制御 ======
    function startTimer() {
      if (isPaused) {
        isPaused = false;
      }
      startTime = Date.now();
      timerInterval = setInterval(updateTimer, 1000);
    }

    function pauseTimer() {
      clearInterval(timerInterval);
      isPaused = true;
      const now = Date.now();
      const elapsed = Math.floor((now - startTime) / 1000);
      remainingTime -= elapsed;
    }

    function resetTimer() {
      clearInterval(timerInterval);
      isWork = true;
      sessionCount = 0;
      totalMinutes = 0;
      remainingTime = workDuration;
      isPaused = false;
      updateStatus();
      updateTotal();
      displayTime(remainingTime);
    }

    function updateTimer() {
      const now = Date.now();
      const elapsed = Math.floor((now - startTime) / 1000);
      const timeLeft = remainingTime - elapsed;

      if (timeLeft <= 0) {
        clearInterval(timerInterval);

        if (isWork) {
          totalMinutes += Math.floor(workDuration / 60);
          updateTotal();

          sessionCount++;
          if (totalMinutes % 60 === 0) {
            showPraise(totalMinutes);
          }

          if (sessionCount % cycleCount === 0) {
            remainingTime = longBreak;
          } else {
            remainingTime = shortBreak;
          }
          isWork = false;
        } else {
          remainingTime = workDuration;
          isWork = true;
        }

        updateStatus();
        displayTime(remainingTime);
        startTimer(); // 自動で次に進む
      } else {
        displayTime(timeLeft);
      }
    }

    // ====== 称賛メッセージ ======
    const achievements = [
      { minutes: 60, praise: "1時間達成！", suggestion: "映画の半分くらいの時間に相当します。" },
      { minutes: 120, praise: "2時間達成！", suggestion: "映画1本分の集中力です。" },
      { minutes: 180, praise: "3時間達成！", suggestion: "小説の1/3を読める時間です。" },
      { minutes: 240, praise: "4時間達成！", suggestion: "国内移動に匹敵する集中です。" },
      { minutes: 480, praise: "8時間フル達成！", suggestion: "まるでフルタイム勤務のようです！" }
    ];

    function showPraise(totalMinutes) {
      const achievement = achievements.find(a => a.minutes === totalMinutes);
      if (!achievement) return;

      const box = document.getElementById("praise-box");
      box.innerHTML = `<strong>${achievement.praise}</strong><br>${achievement.suggestion}`;
      box.style.display = "block";

      setTimeout(() => { box.style.display = "none"; }, 7000);
    }

    // ====== イベント設定 ======
    document.getElementById("startBtn").addEventListener("click", startTimer);
    document.getElementById("pauseBtn").addEventListener("click", pauseTimer);
    document.getElementById("resetBtn").addEventListener("click", resetTimer);

    // 初期表示
    displayTime(remainingTime);
    updateStatus();
    updateTotal();
  </script>
</body>
</html>


